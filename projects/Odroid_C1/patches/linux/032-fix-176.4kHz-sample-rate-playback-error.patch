From 43863e1417013a174e0c7cebcb32a8346c622cc6 Mon Sep 17 00:00:00 2001
From: ckkim <ckkim@hardkernel.com>
Date: Tue, 24 May 2016 15:17:01 +0900
Subject: [PATCH] odroid-c1:Sound card 176.4KHz sample-rate playback error fix.

Change-Id: Id5eecd6986b3c7796c29432f12ce52affbe0bcbd
---
 sound/soc/aml/m8/aml_audio_hw.c | 78 ++++++++++++++++++---------------
 1 file changed, 42 insertions(+), 36 deletions(-)

diff --git a/sound/soc/aml/m8/aml_audio_hw.c b/sound/soc/aml/m8/aml_audio_hw.c
index 6c4e8468256463..9490cab7d8b327 100644
--- a/sound/soc/aml/m8/aml_audio_hw.c
+++ b/sound/soc/aml/m8/aml_audio_hw.c
@@ -90,25 +90,25 @@ int audio_clock_config_table[][15][3]=
 	   //7.875k, 8K, 11.025k, 12k, 16k, 22.05k, 24k, 32k, 44.1k, 48k, 88.2k, 96k, 192k
 	*/
 	{
-	//256
-        {0x0005cc08, (60-1)},  // 32
-        {0x0005e965, (40-1)}, //44.1
-        {0x0004c9a0, (50-1)},	//48K
-        {0x0005cc08, (20-1)},// 96k ,24.576M
-        {0x0005cc08, (10-1)},   // 192k, 49.152M
-        {0x0005cc08, (240-1)}, // 8k
-        {0x0005e965, (160-1)}, // 11.025
-        {0x0007e47f, (86-1)},  // 12
-        {0x0005cc08, (120-1)}, // 16
-        {0x0005e965, (80-1)},  // 22.05
-        {0x0004c9a0, (100-1)},  // 24
-        {0x0007f3f0, (127-1)}, // 7875
-        {0x0005e965, (20-1)}, // 88.2k ,22.579M
-        {0x0005e965, (5-1)}, // 352.8k
-        {0x0005cc08, (5-1)}, // 384k
+		//256
+	        {0x0005cc08, (60-1)},  // 32
+	        {0x0005e965, (40-1)}, //44.1
+	        {0x0004c9a0, (50-1)},	//48K
+	        {0x0005cc08, (20-1)},// 96k ,24.576M
+	        {0x0005cc08, (10-1)},   // 192k, 49.152M
+	        {0x0005cc08, (240-1)}, // 8k
+	        {0x0005e965, (160-1)}, // 11.025
+	        {0x0007e47f, (86-1)},  // 12
+	        {0x0005cc08, (120-1)}, // 16
+	        {0x0005e965, (80-1)},  // 22.05
+	        {0x0004c9a0, (100-1)},  // 24
+	        {0x0005e965, (10-1)}, // 176.4
+	        {0x0005e965, (20-1)}, // 88.2k ,22.579M
+	        {0x0005e965, (5-1)}, // 352.8k
+	        {0x0005cc08, (5-1)}, // 384k
 	},
 	{
-	//384
+		//384
 		{0x0007c4e6, (23-1)},  // 32
 		{0x0004c4a4, (29-1)},  // 44.1
 		{0x0004cb18, (26-1)},  // 48
@@ -121,26 +121,26 @@ int audio_clock_config_table[][15][3]=
 		{0x0004c4a4, (58-1)},  // 22.05
 		{0x0004c60e, (53-1)},  // 24
 		{0x0007fdfa, (83-1)},  // 7875
-        {0x0005e965, (5-1)}, // 352.8k
-        {0x0005cc08, (5-1)}, // 384k
+	        {0x0005e965, (5-1)}, // 352.8k
+	        {0x0005cc08, (5-1)}, // 384k
 	},
 	{
-	//128
-        {0x0004f880, (100-1)},  // 32
-        {0x0005e965, (80-1)}, //44.1
-        {0x0004c9a0, (100-1)},	//48K
-        {0x0005cc08, (40-1)},// 96k ,24.576M
-        {0x0005cc08, (20-1)},   // 192k, 49.152M
-        {0x0007f400, (250-1)}, // 8k
-        {0x0006c6f6, (232-1)}, // 11.025
-        {0x0007e47f, (172-1)},  // 12
-        {0x0004f880, (200-1)}, // 16
-        {0x0004c4a4, (174-1)},  // 22.05
-        {0x0007e47f, (86-1)},  // 24
-        {0x0007f3f0, (254-1)}, // 7875
-        {0x0005c88b, (44-1)}, // 88.2k ,22.579M
-        {0x0005e965, (10-1)}, // 352.8k
-        {0x0005cc08, (10-1)}, // 384k
+		//128
+	        {0x0004f880, (100-1)},  // 32
+	        {0x0005e965, (80-1)}, //44.1
+	        {0x0004c9a0, (100-1)},	//48K
+	        {0x0005cc08, (40-1)},// 96k ,24.576M
+	        {0x0005cc08, (20-1)},   // 192k, 49.152M
+	        {0x0007f400, (250-1)}, // 8k
+	        {0x0006c6f6, (232-1)}, // 11.025
+	        {0x0007e47f, (172-1)},  // 12
+	        {0x0004f880, (200-1)}, // 16
+	        {0x0004c4a4, (174-1)},  // 22.05
+	        {0x0007e47f, (86-1)},  // 24
+	        {0x0005e965, (20-1)}, // 176.4
+	        {0x0005c88b, (44-1)}, // 88.2k ,22.579M
+	        {0x0005e965, (10-1)}, // 352.8k
+	        {0x0005cc08, (10-1)}, // 384k
 	},
 };
 
@@ -584,7 +584,10 @@ void audio_set_i2s_clk(unsigned freq, unsigned fs_config, unsigned mpll)
 		case AUDIO_CLK_FREQ_24:
 			index = 10;
 			break;
-        case AUDIO_CLK_FREQ_882:
+		case AUDIO_CLK_FREQ_1764:
+			index = 11;
+			break;
+	        case AUDIO_CLK_FREQ_882:
 			index = 12;
 			break;
 		default:
@@ -717,6 +720,9 @@ void audio_set_958_clk(unsigned freq, unsigned fs_config)
 		case AUDIO_CLK_FREQ_24:
 			index = 10;
 			break;
+		case AUDIO_CLK_FREQ_1764:
+			index = 11;
+			break;
         case AUDIO_CLK_FREQ_882:
 			index = 12;
 			break;
